#!/bin/sh
set -e

# Run the derive
# shellcheck source=../startup/derive-env-variables.sh
. /usr/local/startup/derive-env-variables.sh


# Run custom startup scripts
for Script in /etc/startup.d/*.sh ; do
    if [ -r "$Script" ]; then
        >&2 echo "[STARTUP] Executing startup script '$Script'"
        # shellcheck source=/dev/null
        . "$Script"
        >&2 echo "[STARTUP] âœ” Finished executing startup script '$Script'"
    fi
done

# Generate the configuration files from environment variables.
# shellcheck source=../startup/generate-configuration.sh
. /usr/local/startup/generate-configuration.sh

# Show the summary of the startup.
# shellcheck source=../startup/finish-startup.sh
. /usr/local/startup/finish-startup.sh

# Execute the main command.
exec "$@"
